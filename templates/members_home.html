{% extends "layout.html" %}

{% block title %}Members Home{% endblock %}

{% block content %}
<main>
    <!-- Create Event Form -->
    <section class="create-event">
        <h2>Create a New Event</h2>
        <form action="{{ url_for('create_event') }}" method="POST" enctype="multipart/form-data">
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" required>
            
            <label for="date">Date:</label>
            <input type="date" id="date" name="date" required>
            
            <label for="location">Location:</label>
            <input type="text" id="location" name="location" required>
            
            <label for="poster">Poster Image (optional):</label>
            <input type="file" id="poster" name="poster" accept="image/*">

            <label for="privacy">Event Privacy:</label>
            <select id="privacy" name="privacy" required>
                <option value="public">Public</option>
                <option value="private">Private</option>
            </select>

            <button type="submit">Create Event</button>
        </form>
    </section>

    <!-- See Upcoming Events Link -->
    <p><a href="#events-section" onclick="scrollToSection()">See Upcoming Events</a></p>

    <!-- Events Section -->
    <section id="events-section">
        <h2>Upcoming Events</h2>
        {% if events %}
            {% for event in events %}
                <div class="event">
                    <h3>{{ event.title }}</h3>
                    <p><strong>Date:</strong> {{ event.date }}</p>
                    <p><strong>Location:</strong> {{ event.location }}</p>
                    {% if event.poster_image %}
                        <img src="{{ url_for('static', filename=event.poster_image) }}" alt="{{ event.title }} poster">
                    {% endif %}
                    <p><strong>Privacy:</strong> {{ event.privacy }}</p>
                    {% if event.privacy == 'private' %}
                        <p><strong>RSVP Link:</strong> <a href="{{ url_for('rsvp', event_id=event.id) }}">RSVP Here</a></p>
                    {% endif %}
                    <a href="{{ url_for('event_details', event_id=event.id) }}">See Details</a>
                </div>
            {% endfor %}
        {% else %}
            <p>No upcoming events created.</p>
        {% endif %}
    </section>
</main>
{% endblock %}

<script>
    function scrollToSection() {
        document.getElementById('events-section').scrollIntoView({ behavior: 'smooth' });
    }
</script>
